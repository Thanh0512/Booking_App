{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Assignment2\\\\client\\\\src\\\\pages\\\\hotel\\\\Hotel.jsx\",\n  _s = $RefreshSig$();\nimport \"./hotel.css\";\nimport Navbar from \"../../components/navbar/Navbar\";\nimport Header from \"../../components/header/Header\";\nimport MailList from \"../../components/mailList/MailList\";\nimport Footer from \"../../components/footer/Footer\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCircleArrowLeft, faCircleArrowRight, faCircleXmark, faLocationDot } from \"@fortawesome/free-solid-svg-icons\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Hotel = () => {\n  _s();\n  const {\n    hotelID\n  } = useParams();\n  const [hotel, setHotel] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [slideNumber, setSlideNumber] = useState(0);\n  const [open, setOpen] = useState(false);\n  const [showBookingForm, setShowBookingForm] = useState(false);\n  const bookingFormRef = useRef(null);\n  const [bookingData, setBookingData] = useState({\n    checkIn: \"\",\n    checkOut: \"\",\n    roomsSelected: [],\n    paymentMethod: \"Credit Card\"\n  });\n  const [availableRooms, setAvailableRooms] = useState([]);\n  const [userInfo, setUserInfo] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    identityCard: \"\"\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  useEffect(() => {\n    const fetchHotel = async () => {\n      try {\n        const res = await axios.get(`http://localhost:5000/api/hotels/${hotelID}`);\n        setHotel(res.data);\n      } catch (err) {\n        console.error(err);\n        alert(\"Không lấy được thông tin khách sạn\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchHotel();\n  }, [hotelID]);\n  useEffect(() => {\n    const fetchUser = async () => {\n      const token = localStorage.getItem(\"token\");\n      console.log(\"Token lấy từ localStorage:\", token);\n      if (!token) return;\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/users/me\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const user = res.data;\n        setUserInfo({\n          name: user.name || \"\",\n          email: user.email || \"\",\n          phone: user.phone || \"\",\n          identityCard: user.identityCard || \"\"\n        });\n      } catch (err) {\n        console.log(\"Không lấy được thông tin user\");\n      }\n    };\n    fetchUser();\n  }, []);\n\n  // === 3. Fetch Available Rooms khi ngày thay đổi ===\n  useEffect(() => {\n    const fetchAvailableRooms = async () => {\n      if (!bookingData.checkIn || !bookingData.checkOut) {\n        setAvailableRooms([]);\n        return;\n      }\n      if (new Date(bookingData.checkIn) >= new Date(bookingData.checkOut)) {\n        setAvailableRooms([]);\n        return;\n      }\n      try {\n        const res = await axios.get(`http://localhost:5000/api/hotels/room/checkAvailable`, {\n          params: {\n            hotelId: hotelID,\n            startDate: bookingData.checkIn,\n            endDate: bookingData.checkOut\n          }\n        });\n        setAvailableRooms(res.data);\n      } catch (err) {\n        console.error(\"Lỗi lấy phòng trống:\", err);\n        setAvailableRooms([]);\n      }\n    };\n    fetchAvailableRooms();\n  }, [bookingData.checkIn, bookingData.checkOut, hotelID]);\n\n  // === 4. Reset roomsSelected khi đổi ngày ===\n  useEffect(() => {\n    setBookingData(prev => ({\n      ...prev,\n      roomsSelected: []\n    }));\n  }, [bookingData.checkIn, bookingData.checkOut]);\n\n  // === Slider Controls ===\n  const handleOpen = i => {\n    setSlideNumber(i);\n    setOpen(true);\n  };\n  const handleMove = direction => {\n    if (!(hotel !== null && hotel !== void 0 && hotel.photos)) return;\n    let newSlideNumber;\n    if (direction === \"l\") {\n      newSlideNumber = slideNumber === 0 ? hotel.photos.length - 1 : slideNumber - 1;\n    } else {\n      newSlideNumber = slideNumber === hotel.photos.length - 1 ? 0 : slideNumber + 1;\n    }\n    setSlideNumber(newSlideNumber);\n  };\n\n  // === Chọn/Bỏ chọn phòng \n  const handleSelectRoom = (roomNumber, checked) => {\n    let newRooms = [...bookingData.roomsSelected];\n    if (checked) {\n      if (!newRooms.includes(roomNumber)) {\n        newRooms.push(roomNumber);\n      }\n    } else {\n      newRooms = newRooms.filter(num => num !== roomNumber);\n    }\n    setBookingData({\n      ...bookingData,\n      roomsSelected: newRooms\n    });\n  };\n\n  // === Tính tổng tiền \n  const calculateTotal = () => {\n    if (!bookingData.checkIn || !bookingData.checkOut) return 0;\n    const start = new Date(bookingData.checkIn);\n    const end = new Date(bookingData.checkOut);\n    if (end <= start) return 0;\n    const diffDays = Math.ceil((end - start) / (1000 * 60 * 60 * 24));\n    let total = 0;\n    availableRooms.forEach(roomType => {\n      const selectedCount = roomType.roomNumbers.filter(room => bookingData.roomsSelected.includes(room.number)).length;\n      total += selectedCount * roomType.price;\n    });\n    return total * diffDays;\n  };\n\n  // === Xử lý nút Book Now ===\n  const handleBookNow = () => {\n    setShowBookingForm(true);\n    setTimeout(() => {\n      var _bookingFormRef$curre;\n      (_bookingFormRef$curre = bookingFormRef.current) === null || _bookingFormRef$curre === void 0 ? void 0 : _bookingFormRef$curre.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\"\n      });\n    }, 100);\n  };\n\n  // === Xử lý đặt phòng ===\n  const handleReserve = async () => {\n    if (isSubmitting) return;\n    const {\n      checkIn,\n      checkOut,\n      roomsSelected,\n      paymentMethod\n    } = bookingData;\n    const {\n      name,\n      email,\n      phone\n    } = userInfo;\n    if (!checkIn || !checkOut || roomsSelected.length === 0) {\n      return alert(\"Vui lòng chọn ngày và ít nhất một phòng!\");\n    }\n    if (!name || !email || !phone) {\n      return alert(\"Vui lòng điền đầy đủ họ tên, email và số điện thoại!\");\n    }\n    setIsSubmitting(true);\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"Bạn cần đăng nhập để đặt phòng.\");\n      setIsSubmitting(false);\n      return;\n    }\n    try {\n      await axios.post(\"http://localhost:5000/api/transactions\", {\n        hotel: hotelID,\n        room: roomsSelected,\n        dateStart: checkIn,\n        dateEnd: checkOut,\n        payment: paymentMethod,\n        price: calculateTotal()\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      alert(\"Đặt phòng thành công!\");\n      window.location.href = \"/transactions\";\n    } catch (err) {\n      console.error(err);\n      alert(\"Lỗi đặt phòng. Phòng có thể đã được đặt. Vui lòng thử lại.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // === Loading & Error ===\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"loading\",\n    children: \"\\u0110ang t\\u1EA3i kh\\xE1ch s\\u1EA1n...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 245,\n    columnNumber: 23\n  }, this);\n  if (!hotel) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"error\",\n    children: \"Kh\\xF4ng t\\xECm th\\u1EA5y kh\\xE1ch s\\u1EA1n\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 22\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Header, {\n      type: \"list\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"hotelContainer\",\n      children: [open && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"slider\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faCircleXmark,\n          className: \"close\",\n          onClick: () => setOpen(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faCircleArrowLeft,\n          className: \"arrow\",\n          onClick: () => handleMove(\"l\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sliderWrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: hotel.photos[slideNumber],\n            alt: \"\",\n            className: \"sliderImg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faCircleArrowRight,\n          className: \"arrow\",\n          onClick: () => handleMove(\"r\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hotelWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"hotelTitle\",\n          children: hotel.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hotelAddress\",\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faLocationDot\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: hotel.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"hotelDistance\",\n          children: [\"Excellent location \", hotel.distance, \"m from center\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"hotelPriceHighlight\",\n          children: [\"Book a stay over $\", hotel.cheapestPrice, \" at this property and get a free airport taxi\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hotelImages\",\n          children: hotel.photos.map((photo, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hotelImgWrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              onClick: () => handleOpen(i),\n              src: photo,\n              alt: \"\",\n              className: \"hotelImg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hotelDetails\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hotelDetailsTexts\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"hotelTitle\",\n              children: hotel.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"hotelDesc\",\n              children: hotel.desc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hotelDetailsPrice\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: [\"$\", hotel.cheapestPrice]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 17\n              }, this), \" / night\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bookNow\",\n              onClick: handleBookNow,\n              children: \"Reserve or Book Now!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), showBookingForm && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bookingFormWrapper\",\n          ref: bookingFormRef,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bookingFormLeft\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Dates\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"datePickerGroup\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"datePickerItem\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Check in\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  className: \"bookingDateInput\",\n                  value: bookingData.checkIn,\n                  min: new Date().toISOString().split(\"T\")[0],\n                  onChange: e => {\n                    const val = e.target.value;\n                    if (val < new Date().toISOString().split(\"T\")[0]) {\n                      alert(\"Ngày nhận phòng không hợp lệ!\");\n                      return;\n                    }\n                    setBookingData({\n                      ...bookingData,\n                      checkIn: val\n                    });\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"datePickerItem\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Check out\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  className: \"bookingDateInput\",\n                  value: bookingData.checkOut,\n                  min: bookingData.checkIn || new Date().toISOString().split(\"T\")[0],\n                  onChange: e => setBookingData({\n                    ...bookingData,\n                    checkOut: e.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Select Room \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"availableRoomsList\",\n              children: availableRooms.length === 0 ? bookingData.checkIn && bookingData.checkOut ? /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: \"red\",\n                  fontWeight: \"bold\"\n                },\n                children: \"Kh\\xF4ng c\\xF3 ph\\xF2ng tr\\u1ED1ng trong kho\\u1EA3ng ng\\xE0y n\\xE0y.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Vui l\\xF2ng ch\\u1ECDn ng\\xE0y nh\\u1EADn v\\xE0 tr\\u1EA3 ph\\xF2ng.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 23\n              }, this) : availableRooms.map(roomType => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"roomTypeItem\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"roomInfo\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: roomType.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 350,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: roomType.desc\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Max people:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 353,\n                      columnNumber: 29\n                    }, this), \" \", roomType.maxPeople]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 352,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Price:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 356,\n                      columnNumber: 29\n                    }, this), \" $\", roomType.price]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"roomSelectionCheckboxes\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Select Room:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 360,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"roomCheckboxesWrapper\",\n                    children: roomType.roomNumbers.map(room => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"singleRoomOption\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: `room-${room.number}`,\n                        style: {\n                          fontWeight: bookingData.roomsSelected.includes(room.number) ? \"bold\" : \"normal\",\n                          color: bookingData.roomsSelected.includes(room.number) ? \"#0071c2\" : \"inherit\"\n                        },\n                        children: [\"Ph\\xF2ng \", room.number]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 364,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"checkbox\",\n                        id: `room-${room.number}`,\n                        checked: bookingData.roomsSelected.includes(room.number),\n                        onChange: e => handleSelectRoom(room.number, e.target.checked)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 377,\n                        columnNumber: 33\n                      }, this)]\n                    }, room.number, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 363,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 361,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 25\n                }, this)]\n              }, roomType._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bookingFormRight\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Reserve Info\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Your Full Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Nguy\\u1EC5n V\\u0103n A\",\n              value: userInfo.name,\n              onChange: e => setUserInfo({\n                ...userInfo,\n                name: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"email@example.com\",\n              value: userInfo.email,\n              onChange: e => setUserInfo({\n                ...userInfo,\n                email: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Your Phone Number:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"0901234567\",\n              value: userInfo.phone,\n              onChange: e => setUserInfo({\n                ...userInfo,\n                phone: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Your Indentity Car Number:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"123456789\",\n              value: userInfo.identityCard,\n              onChange: e => setUserInfo({\n                ...userInfo,\n                identityCard: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Select Payment Method\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: bookingData.paymentMethod,\n              onChange: e => setBookingData({\n                ...bookingData,\n                paymentMethod: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"credit_card\",\n                children: \"Credit Card\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"paypal\",\n                children: \"PayPal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"cash\",\n                children: \"Cash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"Total Bill: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [calculateTotal(), \" $\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"reserveBtn\",\n              onClick: handleReserve,\n              disabled: isSubmitting,\n              children: isSubmitting ? \"Đang xử lý...\" : \"Reserve Now\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MailList, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Hotel, \"3mKFoApNENm4+2wLJLGhD1Jtuto=\", false, function () {\n  return [useParams];\n});\n_c = Hotel;\nexport default Hotel;\nvar _c;\n$RefreshReg$(_c, \"Hotel\");","map":{"version":3,"names":["Navbar","Header","MailList","Footer","FontAwesomeIcon","faCircleArrowLeft","faCircleArrowRight","faCircleXmark","faLocationDot","useState","useEffect","useRef","useParams","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Hotel","_s","hotelID","hotel","setHotel","loading","setLoading","slideNumber","setSlideNumber","open","setOpen","showBookingForm","setShowBookingForm","bookingFormRef","bookingData","setBookingData","checkIn","checkOut","roomsSelected","paymentMethod","availableRooms","setAvailableRooms","userInfo","setUserInfo","name","email","phone","identityCard","isSubmitting","setIsSubmitting","fetchHotel","res","get","data","err","console","error","alert","fetchUser","token","localStorage","getItem","log","headers","Authorization","user","fetchAvailableRooms","Date","params","hotelId","startDate","endDate","prev","handleOpen","i","handleMove","direction","photos","newSlideNumber","length","handleSelectRoom","roomNumber","checked","newRooms","includes","push","filter","num","calculateTotal","start","end","diffDays","Math","ceil","total","forEach","roomType","selectedCount","roomNumbers","room","number","price","handleBookNow","setTimeout","_bookingFormRef$curre","current","scrollIntoView","behavior","block","handleReserve","post","dateStart","dateEnd","payment","window","location","href","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","icon","onClick","src","alt","address","distance","cheapestPrice","map","photo","desc","ref","value","min","toISOString","split","onChange","e","val","target","style","color","fontWeight","title","maxPeople","htmlFor","id","_id","placeholder","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/Assignment2/client/src/pages/hotel/Hotel.jsx"],"sourcesContent":["import \"./hotel.css\";\nimport Navbar from \"../../components/navbar/Navbar\";\nimport Header from \"../../components/header/Header\";\nimport MailList from \"../../components/mailList/MailList\";\nimport Footer from \"../../components/footer/Footer\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faCircleArrowLeft,\n  faCircleArrowRight,\n  faCircleXmark,\n  faLocationDot,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst Hotel = () => {\n  const { hotelID } = useParams();\n  const [hotel, setHotel] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  \n  const [slideNumber, setSlideNumber] = useState(0);\n  const [open, setOpen] = useState(false);\n\n\n  const [showBookingForm, setShowBookingForm] = useState(false);\n  const bookingFormRef = useRef(null);\n\n  const [bookingData, setBookingData] = useState({\n    checkIn: \"\",\n    checkOut: \"\",\n    roomsSelected: [], \n    paymentMethod: \"Credit Card\",\n  });\n\n  const [availableRooms, setAvailableRooms] = useState([]);\n  const [userInfo, setUserInfo] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    identityCard: \"\",\n  });\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  \n  useEffect(() => {\n    const fetchHotel = async () => {\n      try {\n        const res = await axios.get(`http://localhost:5000/api/hotels/${hotelID}`);\n        setHotel(res.data);\n      } catch (err) {\n        console.error(err);\n        alert(\"Không lấy được thông tin khách sạn\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchHotel();\n  }, [hotelID]);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      const token = localStorage.getItem(\"token\");\n      console.log(\"Token lấy từ localStorage:\", token);\n      if (!token) return;\n\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/users/me\", {\n          headers: {Authorization: `Bearer ${token}`},\n        });\n        const user = res.data;\n        setUserInfo({\n          name: user.name || \"\",\n          email: user.email || \"\",\n          phone: user.phone || \"\",\n          identityCard: user.identityCard || \"\",\n        });\n      } catch (err) {\n        console.log(\"Không lấy được thông tin user\");\n      }\n    };\n    fetchUser();\n  }, []);\n\n  // === 3. Fetch Available Rooms khi ngày thay đổi ===\n  useEffect(() => {\n    const fetchAvailableRooms = async () => {\n      if (!bookingData.checkIn || !bookingData.checkOut) {\n        setAvailableRooms([]);\n        return;\n      }\n\n      if (new Date(bookingData.checkIn) >= new Date(bookingData.checkOut)) {\n        setAvailableRooms([]);\n        return;\n      }\n\n      try {\n        const res = await axios.get(\n          `http://localhost:5000/api/hotels/room/checkAvailable`,\n          {\n            params: {\n              hotelId: hotelID,\n              startDate: bookingData.checkIn,\n              endDate: bookingData.checkOut,\n            },\n          }\n        );\n        setAvailableRooms(res.data);\n      } catch (err) {\n        console.error(\"Lỗi lấy phòng trống:\", err);\n        setAvailableRooms([]);\n      }\n    };\n\n    fetchAvailableRooms();\n  }, [bookingData.checkIn, bookingData.checkOut, hotelID]);\n\n  // === 4. Reset roomsSelected khi đổi ngày ===\n  useEffect(() => {\n    setBookingData((prev) => ({ ...prev, roomsSelected: [] }));\n  }, [bookingData.checkIn, bookingData.checkOut]);\n\n  // === Slider Controls ===\n  const handleOpen = (i) => {\n    setSlideNumber(i);\n    setOpen(true);\n  };\n\n  const handleMove = (direction) => {\n    if (!hotel?.photos) return;\n    let newSlideNumber;\n    if (direction === \"l\") {\n      newSlideNumber = slideNumber === 0 ? hotel.photos.length - 1 : slideNumber - 1;\n    } else {\n      newSlideNumber = slideNumber === hotel.photos.length - 1 ? 0 : slideNumber + 1;\n    }\n    setSlideNumber(newSlideNumber);\n  };\n\n  // === Chọn/Bỏ chọn phòng \n  const handleSelectRoom = (roomNumber, checked) => {\n    let newRooms = [...bookingData.roomsSelected];\n    if (checked) {\n      if (!newRooms.includes(roomNumber)) { \n            newRooms.push(roomNumber);\n        }\n    } else {\n      newRooms = newRooms.filter((num) => num !== roomNumber);\n    }\n    setBookingData({ ...bookingData, roomsSelected: newRooms });\n  };\n\n  // === Tính tổng tiền \n  const calculateTotal = () => {\n    if (!bookingData.checkIn || !bookingData.checkOut) return 0;\n\n    const start = new Date(bookingData.checkIn);\n    const end = new Date(bookingData.checkOut);\n    if (end <= start) return 0;\n\n    const diffDays = Math.ceil((end - start) / (1000 * 60 * 60 * 24));\n    let total = 0;\n\n    availableRooms.forEach((roomType) => {\n      const selectedCount = roomType.roomNumbers.filter((room) =>\n        bookingData.roomsSelected.includes(room.number)\n      ).length;\n      total += selectedCount * roomType.price;\n    });\n\n    return total * diffDays;\n  };\n\n  \n\n  // === Xử lý nút Book Now ===\n  const handleBookNow = () => {\n    setShowBookingForm(true);\n    setTimeout(() => {\n      bookingFormRef.current?.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n    }, 100);\n  };\n\n  // === Xử lý đặt phòng ===\n  const handleReserve = async () => {\n    if (isSubmitting) return;\n\n    const { checkIn, checkOut, roomsSelected, paymentMethod } = bookingData;\n    const { name, email, phone } = userInfo;\n\n    if (!checkIn || !checkOut || roomsSelected.length === 0) {\n      return alert(\"Vui lòng chọn ngày và ít nhất một phòng!\");\n    }\n    if (!name || !email || !phone) {\n      return alert(\"Vui lòng điền đầy đủ họ tên, email và số điện thoại!\");\n    }\n\n    setIsSubmitting(true);\nconst token = localStorage.getItem(\"token\"); \n\n    if (!token) {\n        alert(\"Bạn cần đăng nhập để đặt phòng.\");\n        setIsSubmitting(false);\n        return;\n    }\n\n    try {\n      await axios.post(\"http://localhost:5000/api/transactions\", {\n       \n        hotel: hotelID, \n        \n        room: roomsSelected, \n       \n        dateStart: checkIn,\n      \n        dateEnd: checkOut,\n       \n        payment: paymentMethod,\n       \n        price: calculateTotal(),\n      },\n{\n            headers: {\n                \n               'Authorization': `Bearer ${token}`\n                \n            }\n        });\n\n\n      alert(\"Đặt phòng thành công!\");\n      window.location.href = \"/transactions\";\n    } catch (err) {\n      console.error(err);\n      alert(\"Lỗi đặt phòng. Phòng có thể đã được đặt. Vui lòng thử lại.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // === Loading & Error ===\n  if (loading) return <p className=\"loading\">Đang tải khách sạn...</p>;\n  if (!hotel) return <p className=\"error\">Không tìm thấy khách sạn</p>;\n\n  return (\n    <>\n      <Navbar />\n      <Header type=\"list\" />\n\n      <div className=\"hotelContainer\">\n        {/* Slider */}\n        {open && (\n          <div className=\"slider\">\n            <FontAwesomeIcon icon={faCircleXmark} className=\"close\" onClick={() => setOpen(false)} />\n            <FontAwesomeIcon icon={faCircleArrowLeft} className=\"arrow\" onClick={() => handleMove(\"l\")} />\n            <div className=\"sliderWrapper\">\n              <img src={hotel.photos[slideNumber]} alt=\"\" className=\"sliderImg\" />\n            </div>\n            <FontAwesomeIcon icon={faCircleArrowRight} className=\"arrow\" onClick={() => handleMove(\"r\")} />\n          </div>\n        )}\n\n        <div className=\"hotelWrapper\">\n          <h1 className=\"hotelTitle\">{hotel.name}</h1>\n          <div className=\"hotelAddress\">\n            <FontAwesomeIcon icon={faLocationDot} />\n            <span>{hotel.address}</span>\n          </div>\n          <span className=\"hotelDistance\">Excellent location {hotel.distance}m from center</span>\n          <span className=\"hotelPriceHighlight\">\n            Book a stay over ${hotel.cheapestPrice} at this property and get a free airport taxi\n          </span>\n\n          <div className=\"hotelImages\">\n            {hotel.photos.map((photo, i) => (\n              <div className=\"hotelImgWrapper\" key={i}>\n                <img onClick={() => handleOpen(i)} src={photo} alt=\"\" className=\"hotelImg\" />\n              </div>\n            ))}\n          </div>\n\n          <div className=\"hotelDetails\">\n            <div className=\"hotelDetailsTexts\">\n              <h1 className=\"hotelTitle\">{hotel.name}</h1>\n              <p className=\"hotelDesc\">{hotel.desc}</p>\n            </div>\n            <div className=\"hotelDetailsPrice\">\n              <h2>\n                <b>${hotel.cheapestPrice}</b> / night\n              </h2>\n              <button className=\"bookNow\" onClick={handleBookNow}>\n                Reserve or Book Now!\n              </button>\n            </div>\n          </div>\n\n          {/* === BOOKING FORM === */}\n          {showBookingForm && (\n            <div className=\"bookingFormWrapper\" ref={bookingFormRef}>\n              {/* LEFT: Chọn ngày & phòng */}\n              <div className=\"bookingFormLeft\">\n                <h2>Dates</h2>\n                <div className=\"datePickerGroup\">\n                  <div className=\"datePickerItem\">\n                    <label>Check in</label>\n                    <input\n                      type=\"date\"\n                      className=\"bookingDateInput\"\n                      value={bookingData.checkIn}\n                      min={new Date().toISOString().split(\"T\")[0]}\n                      onChange={(e) => {\n                        const val = e.target.value;\n                        if (val < new Date().toISOString().split(\"T\")[0]) {\n                          alert(\"Ngày nhận phòng không hợp lệ!\");\n                          return;\n                        }\n                        setBookingData({ ...bookingData, checkIn: val });\n                      }}\n                    />\n                  </div>\n                  <div className=\"datePickerItem\">\n                    <label>Check out</label>\n                    <input\n                      type=\"date\"\n                      className=\"bookingDateInput\"\n                      value={bookingData.checkOut}\n                      min={bookingData.checkIn || new Date().toISOString().split(\"T\")[0]}\n                      onChange={(e) => setBookingData({ ...bookingData, checkOut: e.target.value })}\n                    />\n                  </div>\n                </div>\n\n                <h3>Select Room </h3>\n                <div className=\"availableRoomsList\">\n                  {availableRooms.length === 0 ? (\n                    bookingData.checkIn && bookingData.checkOut ? (\n                      <p style={{ color: \"red\", fontWeight: \"bold\" }}>\n                        Không có phòng trống trong khoảng ngày này.\n                      </p>\n                    ) : (\n                      <p>Vui lòng chọn ngày nhận và trả phòng.</p>\n                    )\n                  ) : (\n                    availableRooms.map((roomType) => (\n                      <div className=\"roomTypeItem\" key={roomType._id}>\n                        <div className=\"roomInfo\">\n                          <h4>{roomType.title}</h4>\n                          <p>{roomType.desc}</p>\n                          <p>\n                            <strong>Max people:</strong> {roomType.maxPeople} \n                          </p>\n                          <p>\n                            <strong>Price:</strong> ${roomType.price}\n                          </p>\n                        </div>\n                        <div className=\"roomSelectionCheckboxes\">\n                          <label>Select Room:</label>\n                          <div className=\"roomCheckboxesWrapper\">\n                            {roomType.roomNumbers.map((room) => (\n                              <div className=\"singleRoomOption\" key={room.number}>\n                                <label\n                                  htmlFor={`room-${room.number}`}\n                                  style={{\n                                    fontWeight: bookingData.roomsSelected.includes(room.number)\n                                      ? \"bold\"\n                                      : \"normal\",\n                                    color: bookingData.roomsSelected.includes(room.number)\n                                      ? \"#0071c2\"\n                                      : \"inherit\",\n                                  }}\n                                >\n                                  Phòng {room.number}\n                                </label>\n                                <input\n                                  type=\"checkbox\"\n                                  id={`room-${room.number}`}\n                                  checked={bookingData.roomsSelected.includes(room.number)}\n                                  onChange={(e) => handleSelectRoom(room.number, e.target.checked)}\n                                />\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      </div>\n                    ))\n                  )}\n                </div>\n              </div>\n\n              {/* RIGHT: Thông tin đặt phòng */}\n              <div className=\"bookingFormRight\">\n                <h2>Reserve Info</h2>\n                <label>Your Full Name</label>\n                <input\n                  type=\"text\"\n                  placeholder=\"Nguyễn Văn A\"\n                  value={userInfo.name}\n                  onChange={(e) => setUserInfo({ ...userInfo, name: e.target.value })}\n                />\n                <label>Email:</label>\n                <input\n                  type=\"email\"\n                  placeholder=\"email@example.com\"\n                  value={userInfo.email}\n                  onChange={(e) => setUserInfo({ ...userInfo, email: e.target.value })}\n                />\n                <label>Your Phone Number:</label>\n                <input\n                  type=\"text\"\n                  placeholder=\"0901234567\"\n                  value={userInfo.phone}\n                  onChange={(e) => setUserInfo({ ...userInfo, phone: e.target.value })}\n                />\n                <label>Your Indentity Car Number:</label>\n                <input\n                  type=\"text\"\n                  placeholder=\"123456789\"\n                  value={userInfo.identityCard}\n                  onChange={(e) => setUserInfo({ ...userInfo, identityCard: e.target.value })}\n                />\n\n                <label>Select Payment Method</label>\n                <select\n                  value={bookingData.paymentMethod}\n                  onChange={(e) =>\n                    setBookingData({ ...bookingData, paymentMethod: e.target.value })\n                  }\n                >\n                  <option value=\"credit_card\">Credit Card</option>\n                  <option value=\"paypal\">PayPal</option>\n                  <option value=\"cash\">Cash</option>\n                </select>\n\n                <h3>\n                  Total Bill: <strong>{calculateTotal()} $</strong>\n                </h3>\n\n                <button\n                  className=\"reserveBtn\"\n                  onClick={handleReserve}\n                  disabled={isSubmitting}\n                >\n                  {isSubmitting ? \"Đang xử lý...\" : \"Reserve Now\"}\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <MailList />\n        <Footer />\n      </div>\n    </>\n  );\n};\n\nexport default Hotel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}